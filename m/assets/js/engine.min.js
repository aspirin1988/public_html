var _DEBUG_=false;var _ALERT_FALLBACK_=false;var _FORCE_ALERT_=false;if(typeof console==="undefined"||typeof console.log==="undefined"){console={};if(_ALERT_FALLBACK_){console.log=function(a){alert(a)}}else{console.log=function(){}}}function log(c,b,a){if(_DEBUG_){if(_FORCE_ALERT_){alert(c);return}console.log(c);b&&console.log("Line Number - "+b);a&&console.log(arguments.callee.caller.toString())}}function in_array(e,d,c){var b="",a=!!c;if(a){for(b in d){if(d[b]===e){return true}}}else{for(b in d){if(d[b]==e){return true}}}return false}function calcAbsoluteElementsHeight(d){if(d.length==0){return}var b=0,a,c;d.children().each(function(){c=$(this).position().top||parseInt($(this).css("top"));c=isNaN(c)?0:c;a=c+$(this).outerHeight();if(a>b){b=a}});return b}function calcAbsoluteElementsWidth(d){if(d.length==0){return}var b=0,c,a;d.children().each(function(){a=$(this).position().left||parseInt($(this).css("left"));a=isNaN(a)?0:a;c=a+$(this).outerWidth();if(c>b){b=c}});return b}function scaleSize(c,g,i,b,e,j){var a=g/c,d=b/i;e=!!e||false;j=!!j||false;if(e){if(a>=d&&(!j||c>i)){c=i;g=parseInt(c*a,10)}else{if(a<d&&(!j||g>b)){g=b;c=parseInt(g/a,10)}}}else{if(a>=d&&(!j||g>b)){g=b;c=parseInt(g/a,10)}else{if(a<d&&(!j||c>i)){c=i;g=parseInt(c*a,10)}}}return[c,g]}Object.size=function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b,c){var a=this.length,c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);c<0&&(c+=a);for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}(function(b){var a=false;window.MotoJS={init:function(c){MotoJS.events.init();MotoJS.router.init();MotoJS.loader.init();MotoJS.content.init(c);if("onorientationchange" in window){b(window).bind("orientationchange",function(){MotoJS.events.dispatch("onOrientationChange");MotoJS.events.dispatch("onResize")})}a=true;MotoJS.events.dispatch("onInitFinished");b(window).resize(function(){MotoJS.events.dispatch("onResize")})},isAlreadyInit:function(){return a}}})(jQuery);(function(a){MotoJS.ajax=(function(){var b=function(d,e){};var c=function(e,d){switch(d){case"timeout":log("Timeout is exceeded");break;case"notmodified":log("Requested resource was not modified since last request");break;case"parsererror":log("JSON response is bad");break;default:log("Http error occured - "+e.status+" : "+e.statusText);break}};return{getPage:function(g,d){var e=MotoJS.layout.getLayoutTypeId();return this.getResponse({url:g,layoutId:e},d)},getResponse:function(g,e){if(!e){return}var j=document.location.protocol+"//";var d=j+e;if(MotoJS.website.underConstruction){g.preview="true"}var i=a.get(d,g,null,"json");i.error(c);return i}}})()})(jQuery);(function(a){MotoJS.auth=(function(){var j="#mjs-loginBox",d="ajax.php";var i=function(){a(j).css("visibility","visible");a(j).show();a("#mjs-login-form div.mjs-login-form-input input").focus();MotoJS.events.dispatch("onLoginBoxShow")};var c=function(){a("#mjs-login-form-message").css("visibility","hidden");a(j).hide();MotoJS.events.dispatch("onLoginBoxHide")};var b=function(){a("#mjs-login-form-message").css("visibility","visible")};var g=function(){try{var t=a("#mjs-login-form div.mjs-login-form-input");var s=t.outerHeight();var r=a("input",t);var l=a("#mjs-login-form .mjs-content").width();var m=a("#mjs-login-form .mjs-login-form-submit a");var k=a("#mjs-login-form-close-button");if(m.height()>s){s=m.height();t.height(s-parseInt(t.css("padding-top"))-parseInt(t.css("padding-bottom"))-parseInt(t.css("border-top-width"))-parseInt(t.css("border-bottom-width")))}t.parent().height(s);a("#mjs-login-form .mjs-login-form-submit a").css({height:s+"px","line-height":s+"px",width:a("#mjs-login-form .mjs-login-form-submit a").width()+"px"});a("#mjs-login-form .mjs-login-form-submit a > p").css({"line-height":s+"px"});m.on("click",function(){a(j+" form").submit();return false});k.on("click",function(){var u=MotoJS.router.getPrevState();if(u.hasOwnProperty("page")){c();if(u.contentType=="page"){MotoJS.page.setUrl(u.page)}MotoJS.router.returnState()}return false});var p=l-m.outerWidth()-t.outerWidth()-parseInt(m.css("margin-left"));r.width(p);t.css("width","auto");var n=a("#mjs-login-form-overlay");var o=n.data("opacity");o=parseInt(o);o=o/100;n.css("opacity",o)}catch(q){log("login form init fail");log(q)}};var e=function(k){if(k.length>50){return}MotoJS.ajax.getResponse({action:"login","data[password]":k,"data[username]":"11"},location.hostname+MotoJS.website.basePath+d).success(function(l){if(l.status){c();MotoJS.content.go(MotoJS.router.parseUrl().page||MotoJS.website.startPage.url)}else{b()}}).error(function(m,l){})};return{showLoginBox:i,hideLoginBox:c,init:function(){if(MotoJS.website.websiteProtectionEnabled=="false"){return}var k=a(j);g();k.hide();k.find("form").on("submit",function(m){m.preventDefault();var l=k.find('input[type="password"]').val();e(l);return false})},logout:function(){MotoJS.ajax.getResponse({action:"logout"},location.hostname+MotoJS.website.basePath+d)}}})()})(jQuery);(function(a){MotoJS.content=(function(){var k=false;var i={collection:[],add:function(l){typeof l=="object"&&a.isFunction(l.init)&&this.collection.push(l)},run:function(n){var o=0,l=this.collection.length;MotoJS.tools.isIE()<10&&MotoJS.content.fixStyleIE(n);var m=function(v,t){var s="",r,p,q="";try{v.init()}catch(u){r=v.parentClass==MotoJS.widgets.WidgetClass;p=v.parentClass==MotoJS.objects.ObjectClass;r&&(s="Widget")&&(q=v.name?' "'+v.name+'"':"");p&&(s="Object")&&(q=v.type?' "'+v.type+'"':"");log(s+q+(t?" in Rich Content ":" ")+"init error. "+s+" id - "+v.id+". Details - "+u.message)}};for(o;o<l;o++){m(this.collection[o])}for(o=l;o<this.collection.length;o++){this.collection[o].parentId&&m(this.collection[o],true)}this.collection=[]}};var j=function(m,l){try{if(!m){throw new Error("Error while parsing response object. Response.content is empty","content.js")}MotoJS.page.fill(m.page);MotoJS.website.fill(m.website);MotoJS.layout.fill(m.layout);l||i.run()}catch(n){log("Error while filling content. "+n.message,n.lineNumber)}};var g=function(){a('a[href="#"]').off("click.emptyLinks").on("click.emptyLinks",function(l){l.preventDefault()});a(".mjs-link-bindable").off("click.content").on("click.content",function(l){l.preventDefault();if(a(this).data("disabled")||!a(this).data("action")){a(this).removeData("disabled")}else{MotoJS.content.go(a(this).data("url"),a(this).data("action"))}})};var c=function(){var l;if(MotoJS.popup.getOpenedPopup()){MotoJS.popup.close();l=MotoJS.page.getUrl();l?MotoJS.router.pushState(l,"page"):MotoJS.content.go(MotoJS.website.startPage.url,"switchPage");return true}else{if(a("#mjs-popup-1").children().length>0){a("#mjs-popup-1").empty()}}return false};var b=function(m){var l;MotoJS.isAlreadyInit()&&c();j(m.content,true);if(!MotoJS.isAlreadyInit()&&MotoJS.router.redirectOnLoad(m.content.popup.url)){k=true;return}else{k=false}if(m.statusCode=="401"){MotoJS.auth.showLoginBox();return}else{MotoJS.auth.hideLoginBox()}MotoJS.popup.open(m.content.popup);MotoJS.website.setDocumentTitle(m.content.popup.title);MotoJS.events.dispatch("onContentLoaded");l=MotoJS.router.parseUrl();if(l.widget){MotoJS.widgets.callWidgetMethod(l.widget,"_exec",l.data)}g()};var e=function(l){if(l.hasOwnProperty("error")){MotoJS.page.show();MotoJS.layout.show(true);g()}};var d=function(m){var l,n="openPage";try{if(!m.content||!m.content.page){throw new Error("Error while parsing response object. Response.content is empty","content.js")}window.scrollTo(0,0);if(!MotoJS.isAlreadyInit()&&MotoJS.router.redirectOnLoad(m.content.page.url)){k=true;j(m.content);MotoJS.events.dispatch("onResize");return}if(m.statusCode=="401"){j(m.content);MotoJS.auth.showLoginBox();return}else{MotoJS.auth.hideLoginBox()}MotoJS.popup.close();MotoJS.page.setUrl(m.content.page.url);MotoJS.page.setPageTypeId(m.content.page.pageTypeId);MotoJS.page.setTitle(m.content.page.title);MotoJS.website.setDocumentTitle(m.content.page.title);MotoJS.layout.setLayoutTypeId(m.content.page.layoutTypeId);MotoJS.page.setHeight(m.content.page.height);if(MotoJS.isAlreadyInit()){if(!k){MotoJS.animation.openQueue(n);MotoJS.page.hide({queueName:n});MotoJS.layout.hide({queueName:n})}else{k=false}MotoJS.animation.waitForAnimationComplete(n).done(function(){MotoJS.animation.closeQueue(n);MotoJS.page.empty();MotoJS.layout.empty();j(m.content);MotoJS.events.dispatch("onResize");MotoJS.events.dispatch("onContentLoaded");MotoJS.content.fixHeight();g();MotoJS.page.show();MotoJS.layout.show()})}else{j(m.content);MotoJS.events.dispatch("onResize");MotoJS.events.dispatch("onContentLoaded");g()}l=MotoJS.router.parseUrl();if(l.widget){MotoJS.widgets.callWidgetMethod(l.widget,"_exec",l.data)}}catch(o){log("Error while opening page. "+o.message,o.lineNumber)}};return{SITE_ROOT:"#mjs-website",updateBindableLinks:g,go:function(l,q){switch(q){case"none":break;case"switchPage":if(!l||l==MotoJS.page.getUrl()){return}a.when(MotoJS.load(l)).done(function(r,s){if(!r.hasOwnProperty("error")){d(r);MotoJS.router.pushState(s,"page");MotoJS.content.response=r;MotoJS.events.dispatch("onSwitchFinish",{hash:s})}else{MotoJS.events.dispatch("onSwitchFinish",r)}});break;case"openPopup":if(!l||l==MotoJS.popup.getOpenedPopupUrl()){return}a.when(MotoJS.load(l)).done(function(r,s){if(!r.hasOwnProperty("error")){try{b(r)}catch(t){log("Error while opening popup. "+t.message,t.lineNumber)}MotoJS.router.pushState(s,"popup");MotoJS.content.response=r;MotoJS.events.dispatch("onSwitchFinish",{hash:s})}else{MotoJS.events.dispatch("onSwitchFinish",r)}});break;case"closePopup":c();break;case"openLightbox":var n,m,p=l.split(";"),o={};for(n in p){if(p.hasOwnProperty(n)){m=p[n].split("=");o[m[0]]=m[1]}}MotoJS.lightbox.open(o);break;default:if(c()){return}if(!l){l=MotoJS.website.startPage.url}a.when(MotoJS.load(l)).done(function(r,s){if(r.hasOwnProperty("error")||!r){MotoJS.events.dispatch("onSwitchFinish",r);return}try{if(r.content.popup){MotoJS.router.pushState(s,"popup");b(r)}else{if(r.content.page){MotoJS.router.pushState(s,"page");d(r)}}MotoJS.content.response=r;MotoJS.events.dispatch("onSwitchFinish",{hash:s})}catch(t){log("Switch content error. "+t.message,t.lineNumber)}});break}},init:function(m){var l;try{if(!m.content){throw new Error("Error while parsing response object. Response.content is empty","content.js")}MotoJS.website.init(m.content.website);MotoJS.auth.init();MotoJS.events.subscribe("onSwitchFinish",e);if(m.content.popup){MotoJS.router.pushState(MotoJS.router.parseUrl().clean,"popup");b(m)}else{if(m.content.page){var o=MotoJS.router.parseUrl().clean||MotoJS.website.startPage&&MotoJS.website.startPage.url||m.content.page.url||"404";MotoJS.router.pushState(o,"page");d(m)}}MotoJS.content.response=m;var n=MotoJS.preloaderFactory.getSitePreloader();n.stop();a("#mjs-website").css("opacity","1");MotoJS.website.show();if(!k){MotoJS.page.show();MotoJS.layout.show()}}catch(p){log("Init Error. "+p.message,p.lineNumber)}},getFullUrl:function(l){return document.location.protocol+"//"+window.location.host+MotoJS.website.basePath+l},popupOrPage:function(){return MotoJS.popup.getOpenedPopupUrl()?"popup":"page"},initializer:i,isApple:function(){return navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)},fixHeight:function(){var l=hp=h=0;if(MotoJS.website.height){l=MotoJS.website.height}if(MotoJS.page.getHeight()){hp=MotoJS.page.getHeight()}h=Math.max(l,hp,a(window).height());a("#mjs-main, #mjs-website").height(h);a("#mjs-main, #mjs-website").css("min-height",h+"px");a("body, html").css({"min-height":h+"px"})},fixStyleIE:function(l){var q,n,m,p,o={};if(l){o.popup=null}else{o={website:null,layout:null,page:null,popup:null}}for(p in o){m="";if(p=="website"&&a("#mjs-styler-website").length>0){continue}if(p=="layout"&&a("#mjs-styler-layout").length>0&&!MotoJS.layout.changed()){continue}a("#mjs-styler-"+p).remove();q=MotoJS.holders.getHolderCollection(p);if(q instanceof MotoJS.holders.Collection){n=q.getHolderItemsMap();a.each(n,function(r){var t,s="";if(a("#mjs-object_"+r).length>0){t=a("#mjs-object_"+r+" style")}else{if(a("#mjs-widget_"+r).length>0){t=a("#mjs-widget_"+r+" style")}}t.each(function(){s+=a(this).html()||""});t.remove();m+=s});a("#mjs-browser").prepend('<style id="mjs-styler-'+p+'">'+m+"</style>")}}}}})()})(jQuery);(function(a){MotoJS.loader=(function(){var g=false,c=500,e="ajax.php",d,b,i;var j=function(l){MotoJS.ajax.getPage(l,location.hostname+MotoJS.website.basePath+e).complete(function(m){d.stop();i.resolve(a.parseJSON(m.responseText),l);g=false})};var k=function(l){if(!l){return}b=l;if(!g){i=a.Deferred();MotoJS.events.dispatch("onSwitchStart");d.start();setTimeout(function(){j(b)},c);g=true;return i.promise()}return false};return{init:function(){d=MotoJS.preloaderFactory.getPagePreloader()},load:k,loading:function(){return g}}})();MotoJS.load=MotoJS.loader.load})(jQuery);(function(a){if(_HISTORY_LOAD_){if(!History.emulated.pushState){History.pushState=function(d,g,c,b){if(History.getHashByUrl(c)&&History.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(b!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:b});return false}History.busy(true);var e=History.createStateObject(d,g,c);if(History.isLastSavedState(e)){History.busy(false)}else{e.url=document.location.protocol+"//"+window.location.hostname+MotoJS.website.basePath+c;History.storeState(e);History.expectedStateId=e.id;history.pushState(e.id,e.title,e.url);History.Adapter.trigger(window,"popstate")}return true}}else{History.pushState=function(g,l,b,j){if(History.getHashByUrl(b)){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(j!==false&&History.busy()){History.pushQueue({scope:History,callback:History.pushState,args:arguments,queue:j});return false}History.busy(true);var e=History.createStateObject(g,l,b),c=History.getHashByState(e),d=History.getState(false),i=History.getHashByState(d),k=History.getHash();e.innerUrl=b;History.storeState(e);History.expectedStateId=e.id;History.recycleState(e);if(c===i){History.busy(false);return false}if(c!==k&&c!==History.getShortUrl(document.location.href)){History.setHash(c,false);return false}History.saveState(e);History.Adapter.trigger(window,"statechange");History.busy(false);return true}}}MotoJS.router=(function(){var g={},i={};var c=function(){var k=b();MotoJS.events.dispatch("onStateChange",k);if(k.page!=g.page){MotoJS.content.go(k.clean)}};var j=function(l){var l=l.toString(),k=l.split("/"),m={clean:null,page:null,widget:null,data:null};m.clean=l;m.page=k[0];m.widget=k.length>1?k[1]:null;m.data=k.length>2?k.slice(2):null;return m};var b=function(){var k=window.location.hash.substring(1);return j(k?k.replace(/\.+\//,""):window.location.pathname.replace(MotoJS.website.basePath,""))};var e=function(k,l){var k=k.toString();i=g;g=k?j(k):b();if(l&&in_array(l,["popup","page"])){g.contentType=l}else{g.contentType=MotoJS.content.popupOrPage()}History.pushState(null,null,k)};var d=function(){var k=g;g=i;i=k;History.pushState(null,null,g.clean)};return{parseUrl:b,pushState:e,returnState:d,getPrevState:function(){return i},redirectOnLoad:function(l){var k=b();if(k.page!=""&&k.page!=l){MotoJS.content.go(k.clean);return true}return false},init:function(){_HISTORY_LOAD_&&window.History.Adapter.bind(window,"statechange",c);preloader=MotoJS.preloaderFactory.getPagePreloader()}}})()})(jQuery);(function(a){MotoJS.layout=(function(){var e,c,d;var b=function(){return(e!=c)};return{fill:function(g){if(!d){d=new MotoJS.holders.Collection(MotoJS.content.SITE_ROOT)}d.fill(g)},setLayoutTypeId:function(g){c=e||null;e=g},getLayoutTypeId:function(){return e},hide:function(g){if(b()){return d.hide(g)}return true},show:function(g,i){if(b()||g){return d.show(i)}return true},empty:function(){if(b()){d.empty()}},getHolderItemById:function(g){return d.getHolderItemById(g)},getHolderById:function(g){return d?d.getHolder(g):null},getHolderCollection:function(){return d},changed:b}})()})(jQuery);(function(a){MotoJS.page=(function(){var g,c,d,b,e=null;return{getUrl:function(){return d},setUrl:function(i){d=(d==i)?d:i},setTitle:function(i){g=i},getTitle:function(){return g},setHeight:function(i){b=i},getHeight:function(){return b},fill:function(i){if(!e){e=new MotoJS.holders.Collection(MotoJS.content.SITE_ROOT)}e.fill(i)},setPageTypeId:function(i){prevPageTypeId=c||null;c=i},hide:function(i){return e.hide(i)},show:function(i){return e.show(i)},empty:function(){e.empty()},getHolderItemById:function(i){return e.getHolderItemById(i)},getHolderById:function(i){return e?e.getHolder(i):null},getHolderCollection:function(){return e}}})()})(jQuery);(function(a){MotoJS.popup=(function(){var e="#mjs-popup-background",n="#mjs-popup-",p="#mjs-popups-container",d=".mjs-popup",r=[];var o=function(t){if(!t){throw new Error("Error while creating a new popup. Popup id is empty.")}this.url=null;var t=t,s=new MotoJS.holders.Collection(n+1);this.fill=function(u){s.fill(u);this.url=u.url||null;MotoJS.content.initializer.run(true)};this.show=function(){s.show();MotoJS.events.subscribe("onOrientationChange","popup"+t,k)};this.close=function(){a(n+1).empty();MotoJS.events.unsubscribe("onOrientationChange","popup"+t);(r.length==0)&&a(e).hide()};this.getHolderItemById=function(u){return s.getHolderItemById(u)};this.getHolderCollection=function(){return s};this.getHolderById=function(u){return s?s.getHolder(u):null}};var i=function(s){r.length>0&&(MotoJS.router.parseUrl().page!=c().url)&&MotoJS.popup.close()};var k=function(){var w=700,u=a(window).scrollTop(),t=0,v=a(document).height(),s=w+u;if(s>v){t=v-w;if(t<0){t=0}}else{t=u}a(d).css("top",t+"px");a(window).scrollTop(t)};var c=function(){return(r[r.length-1] instanceof o)?r[r.length-1]:null};var l=function(){var s=c();return s?s.url:null};var g=function(t){var s;try{a(p).is(":hidden")&&a(p).show();s=new o(t.id);(r.length==0)&&a(e).show();s.fill(t);MotoJS.events.dispatch("onResize");k();s.show();r.push(s);MotoJS.events.dispatch("onOpenPopup")}catch(u){log("Open popup error. "+u.message,u.lineNumber)}};var q=function(){var s=r.pop()||null;s&&s.close();!a(p).is(":hidden")&&a(p).hide()};var m=function(t){var s=c();return s?s.getHolderItemById(t):null};var j=function(t){var s=c();return s?s.getHolderById(t):null};var b=function(){var s=c();return s?s.getHolderCollection():null};return{open:g,close:q,getOpenedPopup:c,getOpenedPopupUrl:l,getHolderItemById:m,getHolderById:j,getHolderCollection:b}})()})(jQuery);(function(a){MotoJS.website=(function(){var e;var b={},c={};var d=function(j,k){var j=j||"",k=k||{},m=j.replace(/[^.]/g,"").length,l,i,g;if(m){l=j.split(".");i=k[l.shift()];g=l.length>1?l.join("."):l[0];return i?d(g,i):undefined}else{return k[j]}};return{basePath:null,underConstruction:false,width:null,height:null,init:function(g){if(!g){throw new Error("Error while initializing website object. Response.content.website is empty","website.js")}this.basePath=g.settings.basePath||null;this.width=g.width||null;this.height=g.height||null;this.startPage=g.settings.startPage||{url:""};this.title=g.settings.title||"";self.underConstruction=(g.settings.underConstruction=="true");self.websiteProtectionEnabled=g.settings.websiteProtectionEnabled;b=a.extend(true,{},c,g.properties||{})},fill:function(g){if(!e){e=new MotoJS.holders.Collection(MotoJS.content.SITE_ROOT)}e.fill(g)},getHolderItemById:function(g){return e.getHolderItemById(g)},show:function(){return e.show()},getHolderById:function(g){return e?e.getHolder(g):null},getHolderCollection:function(){return e},setDocumentTitle:function(g){g=MotoJS.website.title+" "+g;document.title=g},getProperty:function(g){return d(g,b)}}})()})(jQuery);(function(a){MotoJS.events=(function(){var e={},d=["onSwitchStart","onSwitchFinish","onResize","onOpenPopup","onStateChange","onOrientationChange","onInitFinished","onClosePopup","onLoginBoxShow","onLoginBoxHide","onContentLoaded"],i="_";function c(j){this.eventName=j;this.callbacks={};this.deliver=function(p){var n,q,m,k,l,o=[];for(var n in this.callbacks){if(this.callbacks.hasOwnProperty(n)){o.push(n)}}o.sort();o.reverse();k=o.length;for(m=0;m<k;m++){q=this.callbacks[o[m]];if(!q){continue}for(l=0;l<q.length;l++){(typeof q[l]=="function")&&q[l](p)}}return this}}var b=function(){var j=a("#mjs-main").width();var k;MotoJS.content.fixHeight();k=a(window).width();if(k<j){k=j}if(a("div.mjs-holder .mjs-auto-width-parent").length>0){k=a("div.mjs-holder .mjs-auto-width-parent").parent().data("widthx");if(!k){k=a("div.mjs-holder .mjs-auto-width-parent").parent().width()}if(k<1){k=a("div.mjs-holder .mjs-auto-width-parent").width()}a("div.mjs-holder .mjs-auto-width-parent").width(k).css("left",0)}if(a("div.mjs-holder .mjs-auto-right-window").length>0){a("div.mjs-holder .mjs-auto-right-window").each(function(){var l=a(this).data();if(typeof l.right=="undefined"){a(this).data("right",parseInt(a(this).css("right")))}a(this).css("right",(l.right-(k-j)/2)+"px")})}if(a("div.mjs-holder .mjs-auto-left-window").length>0){a("div.mjs-holder .mjs-auto-left-window").each(function(){var l=a(this).data();if(typeof a(this).data("left")=="undefined"){a(this).data("left",parseInt(a(this).css("left")))}a(this).css("left",(l.left-(k-j)/2)+"px")})}if(a("div.mjs-holder.mjs-auto-position").length>0){a("div.mjs-holder.mjs-auto-position").each(function(){var m=a(this).data(),l={top:a(this).css("top"),left:a(this).css("left")};if(typeof m.valign!="undefined"){switch(m.valign){case"bottom":l.top=(a("#mjs-main").height()-parseInt(a(this).data("height")))+"px";break;case"middle":l.top=((a("#mjs-main").height()-parseInt(a(this).data("height")))/2)+"px";break}}if(typeof m.halign!="undefined"){switch(m.halign){case"right":l.left=(a("#mjs-main").width()-parseInt(a(this).data("width")))+"px";break;case"middle":l.left=((a("#mjs-main").width()-parseInt(a(this).data("width")))/2)+"px";break}}a(this).css(l)})}};var g=function(l,j,n){var k=j-l+1;var m=i+Math.floor(Math.random()*k)+l;if(n.hasOwnProperty(m)){g(l,j,n)}return m};return{init:function(){var k,j;for(j in d){k=new c(d[j]);e[d[j]]=k}this.subscribe("onResize",b)},dispatch:function(j,k){if(e.hasOwnProperty(j)){e[j].deliver(k)}},subscribe:function(){var j,l,k,m;j=arguments[0];if(!(e[j] instanceof c)){return false}m=e[j].callbacks;if(arguments.length==3){l=arguments[1];if(!l){return false}k=arguments[2]}else{if(arguments.length==2){k=arguments[1];l=g(0,500,m)}else{return false}}if(typeof k!=="function"){return false}if(typeof m[l]=="object"){m[l].push(k)}else{m[l]=[k]}return l},unsubscribe:function(j,l){if(arguments.length==1){var l=j;for(var k in e){this.unsubscribe(k,l)}return}var m=e[j].callbacks;m.hasOwnProperty(l)&&delete m[l]}}})()})(jQuery);(function(a){MotoJS.holders=(function(){var e,d,g="#mjs-holder_",c=".mjs-holder";function i(n,l,j,k){var m={},j=j||false,n=n,l=l;if(!n||!l){throw new Error("Holder id and type are undefined")}this.id=n;this.items=m;this.type=l;this.isDynamic=j;this.properties=k||{};this.$content=null;this.getDomObj=function(){return a(g+n)};this.add=function(o){if(!o){return}if(o.id&&!this.itemExists(o.id)){m[o.id]=o;return true}return false};this.remove=function(o){if(this.itemExists(o)){delete m[o]}MotoJS.events.unsubscribe(o)};this.hide=function(r){var q,o,r=r||{};if(this.isDynamic){try{q=parseInt(this.properties.hideDuration.value,10);if(!(q>0)){throw new Error()}}catch(p){q=r.duration}try{o=this.properties.animationHide.value;if(!o){throw new Error()}}catch(p){o=r.animationHide}MotoJS.animation.hide(g+this.id,{duration:q,animationHide:o,queueName:r.queueName})}else{a.each(m,function(s,t){t.parentId||t.hide(r)})}};this.show=function(r){var q,o,r=r||{};if(this.isDynamic){try{q=parseInt(this.properties.showDuration.value,10);if(!(q>0)){throw new Error()}}catch(p){q=r.duration}try{o=this.properties.animationShow.value;if(!o){throw new Error()}}catch(p){o=r.animationShow}a.each(m,function(s,t){t.applyOpacity()});MotoJS.animation.show(g+this.id,{duration:q,animationShow:o,queueName:r.queueName})}else{a.each(m,function(s,t){t.parentId||t.show(r)})}};this.empty=function(){var o=this;a.each(m,function(p,q){try{q.empty&&q.empty();q._destruct();q.getDomObj().remove();o.remove(q.id)}catch(r){log("Remove hoder item error. Item id - "+q.id+". Details - "+r.message,r.lineNumber)}})};this.itemExists=function(o){return !!m[o]};this.prepareContent=function(){var o=this.html;if(!o||!/<*>/.test(o)){return}this.$content=a(o)};this.makeTransparent=function(){if(MotoJS.isAlreadyInit()){if(!this.$content){return}if(this.$content.filter(c).length==1){this.$content.filter(c).css("opacity","0")}else{this.$content.not("a").css("opacity","0").end().filter("a").children().css("opacity","0")}}else{a(this.container).children().not("a").css("opacity","0").end().filter("a").children().css("opacity","0")}};this.fillDom=function(){a(this.container).append(this.$content)}}var b=function(p){var n={},m=p,j={},o=this;this.getHolder=function(q){if(n[q] instanceof i){return n[q]}else{return null}};this.items=n;this.addHolder=function(q){if(q instanceof i){n[q.id]=q}};this.remove=function(q){if(n[q]){delete n[q]}};var l=function(q){if(q){a.each(q||{},function(){try{var s=a.extend({},MotoJS.widgets.create(this.type),this);if(o.addItemToHolder(this.holder,s)){MotoJS.content.initializer.add(s)}}catch(r){log("Widget init error. Widget id - "+this.id+". Details - "+r.message,r.lineNumber)}})}};var k=function(q){if(q){a.each(q||{},function(){try{var s=MotoJS.objects.create(this);if(o.addItemToHolder(this.holder,s)){MotoJS.content.initializer.add(s)}}catch(r){log("Object init error. Object id - "+this.id+". Details - "+r.message,r.lineNumber)}})}};this.fill=function(q){if(!q){return}a.each(q.holders||{},function(r,t){if(!o.holderExists(r)){try{var s=new MotoJS.holders.HolderClass(r,t.type,t.isDynamic,t.properties);s.x=t.x;s.y=t.y;s.width=t.width;s.height=t.height;s.depth=t.depth;s.html=t._html;s.container=m;if(MotoJS.isAlreadyInit()){s.prepareContent();s.makeTransparent();s.fillDom()}else{s.makeTransparent()}o.addHolder(s)}catch(u){log("Holder init error. Holder id - "+t.id+". Details - "+u.message,u.lineNumber)}}});l(q.modules);l(q.slots);k(q.objects)};this.getHolderItemsMap=function(){return j};this.holderExists=function(q){return !!n[q]};this.hide=function(q){a.each(n,function(r,s){s.hide(q)})};this.show=function(q){a.each(n,function(r,s){s.show(q)})};this.empty=function(){var q=this;a.each(n,function(r,s){s.empty();for(var t in j){if(j[t]==s.id){delete j[t]}}if(s.isDynamic){s.getDomObj().remove()}q.remove(s.id)})};this.getHolderItemById=function(r){var q=this.getHolder(j[r])||{};return q.items?q.items[r]:null};this.addItemToHolder=function(s,r){var q=o.getHolder(s);if(q&&!q.itemExists(r.id)){if(q.add(r)){j[r.id]=q.id;return true}}return false}};return{init:function(){d=MotoJS.website.getDomNode();e=new b();e.fill()},Collection:b,HolderClass:i,getHolderCollection:function(j){var k=null;switch(j){case"page":k=MotoJS.page.getHolderCollection();break;case"website":k=MotoJS.website.getHolderCollection();break;case"layout":k=MotoJS.layout.getHolderCollection();break;case"popup":k=MotoJS.popup.getHolderCollection();break}return k},getHolderById:function(k){var j=MotoJS.page.getHolderById(k);if(!j){j=MotoJS.website.getHolderById(k)}if(!j){j=MotoJS.layout.getHolderById(k)}if(!j){j=MotoJS.popup.getHolderById(k)}return j}}})()})(jQuery);(function(a){MotoJS.objects=(function(){var e={},d="#mjs-object_",c=".mjs-object-content",n=".mjs-object";function m(){var o=this.id="";this.parentClass=m;this.applyOpacity=function(){var p=this.hasOwnProperty("alpha")?this.alpha:1;this.getDomObj().css("opacity",parseFloat(p))};this.me=function(p){var p=p||"";return a(d+this.id+" > "+c+" "+p)};this.hide=function(q){var p={},q=q||{};return MotoJS.animation.hide(d+this.id,q)};this.show=function(q){var p={},q=q||{};p.opacity=this.alpha||"0";if(q.animationShow){p.animationShow=q.animationShow}if(q.duration){p.duration=q.duration}if(q.queueName){p.queueName=q.queueName}return MotoJS.animation.show(d+this.id,p)};this.getDomObj=function(){return a(d+this.id)}}m.prototype.init=function(){};m.prototype._destruct=function(){};function k(){var o="mjs-object_",p;this.init=function(){p=this;var q="";if(this["itemInfo"]&&this.itemInfo.type){switch(this.itemInfo.type){case"youtube":q+='<iframe width="100%" height="100%" src="http://www.youtube.com/embed/'+this.value+"/?wmode=opaque&autoplay="+this.parameters.autoPlay+"&loop="+this.parameters.repeat+(parseInt(this.parameters.repeat)?"&playlist="+this.value:"")+'" frameborder="0" allowfullscreen></iframe>';break}}if(q!=""){a("#"+o+this.id).html(q)}};this.empty=function(){try{a("#"+o+p.id+" iframe").hide()}catch(q){}}}k.prototype=new m();function j(){var o="mjs-object_",p;this.redraw=function(){if(this.live){this._draw()}};this.init=function(){p=this;this.live=true;this._draw();if(this.snapping){var s=a(this._dom).data();if(s&&s.binded){return}s.binded=true;a(this._dom).data(s);var r=this;this.live=true;this.handlerResize=f=function(){r.redraw()};MotoJS.events.subscribe("onResize",this.id,f)}};this._draw=function(){if(this._initWrap()){switch(this.parameters.scalingMode){case"fit":this._scalingModeFit();break;case"fill":this._scalingModeFill();break;case"resize":this._scalingModeResize();break;case"crop":this._scalingModeCrop();break;case"none":this._scalingModeNoScale();break}}};this._destroy=function(){a(this._dom).data({});a(this._wrap).data({});a(this._img).data({});this.live=false};this._initWrap=function(){var v,u,s,r;v=o+this.id;u=a("#"+v);var t=a(u).data();if(t&&t.wraped){return true}a(u).attr("id","_"+v);if(u.parent().is("a")){u=u.parent()}a(u).wrap('<div id="'+v+'"><div class="mjs-image-wrap"></div></div>');this._img=a("#_"+v);this._dom=a("#"+v);this._wrap=a("#"+v+" > .mjs-image-wrap");if(!this._dom||!this._wrap||!this._img||this._dom.length!=1||this._wrap.length!=1||this._img.length!=1){this._destroy();return false}a(this._dom).attr("class",a(this._img).attr("class")).attr("style",a(this._img).attr("style")).css("overflow","hidden");a(this._img).attr("class","").attr("style","");t.wraped=true;a(this._dom).data(t);return true};this._scalingModeResize=function(){var r=a(this._dom).data();if(r&&r.inited){return}if(r==null){r={}}r.inited=true;a(this._dom).data(r);a(this._wrap).css("width","100%").css("height","100%");a(this._img).css("width","100%").css("height","100%")};this._scalingModeNoScale=function(){a(this._img).css("width","100%").css("height","100%")};this._scalingModeCrop=function(){var s=a(this._dom).data();if(s==null){s={}}if(!s||!s.inited){s.inited=true;a(this._dom).data(s)}this.width=a(this._dom).width();this.height=a(this._dom).height();var t=this._scaleInfo(this.itemInfo.parameters.width,this.itemInfo.parameters.height,this.width,this.height);var r={top:0,left:0,width:(this.width>t.width?this.width:t.width),height:(this.height>t.height?this.height:t.height)};switch(this.parameters.verticalAlign){case"middle":r.top=(this.height-this.itemInfo.parameters.height)/2;break;case"bottom":r.top=(this.height-this.itemInfo.parameters.height);break}switch(this.parameters.horizontalAlign){case"center":r.left=(this.width-this.itemInfo.parameters.width)/2;break}a(this._wrap).css("position","absolute").css("top",r.top+"px").css("left",r.left+"px").css("width",r.width+"px").css("height",r.height+"px");q.call(a(this._wrap));if(this.parameters.horizontalAlign!="center"){a(this._img).css("float",this.parameters.horizontalAlign)}};this._scalingModeFit=function(){var r=a(this._dom).data();if(r==null){r={}}if(!r||!r.inited){r.inited=true;a(this._dom).data(r)}this.width=a(this._dom).width();this.height=a(this._dom).height();var s=this._scaleInfo(this.itemInfo.parameters.width,this.itemInfo.parameters.height,this.width,this.height);a(this._dom).css("text-align",this.parameters.horizontalAlign).css("line-height",this.height+"px").css("overflow","hidden");if(s.height<this.height){a(this._img).css("vertical-align",this.parameters.verticalAlign)}else{a(this._img).css("vertical-align","")}if(s.height==this.height){a(this._img).css("width","").css("height",this.height+"px")}else{a(this._img).css("width",this.width+"px").css("height","")}};this._scaleInfo=function(t,w,v,s){var u={width:"",height:"",mode:"height"};var z=v;var r=Math.round(v*w/t);if(r<1){r=1}if(r>s){r=s;z=Math.round(s*t/w);if(z<1){z=1}u.mode="width"}u.width=z;u.height=r;u.maxWidth=Math.round(s*t/w);u.maxHeight=Math.round(v*w/t);return u};var q=function(){var t=a(this).closest(".mjs-rel-wrapper"),s=a(p._dom).width(),r=a(p._dom).height();if(!t.length){t=a("<div />");t.addClass("mjs-rel-wrapper");t.css({overflow:"hidden",position:"relative"});t=a(this).wrap(t).closest(".mjs-rel-wrapper")}t.css({width:s+"px",height:r+"px"})};this._scalingModeFill=function(){var t=a(this._dom).data();if(t==null){t={}}if(!t||!t.inited){t.inited=true;a(this._dom).data(t)}this.width=a(this._dom).width();this.height=a(this._dom).height();var u=this._scaleInfo(this.itemInfo.parameters.width,this.itemInfo.parameters.height,this.width,this.height);var s={top:0,left:0,width:(this.width>u.width?this.width:u.width),height:(this.height>u.height?this.height:u.height)};switch(this.parameters.verticalAlign){case"middle":s.top=(u.height-u.maxHeight)/2;break;case"bottom":s.top=(u.height-u.maxHeight);break}switch(this.parameters.horizontalAlign){case"center":s.left=(u.width-u.maxWidth)/2;break}var r={width:this.width,height:this.height};switch(u.mode){case"width":r.height=u.maxHeight;break;case"height":r.width=u.maxWidth;break}a(this._wrap).css("position","absolute").css("top",s.top+"px").css("left",s.left+"px").css("width",s.width+"px").css("height",s.height+"px");q.call(a(this._wrap));a(this._img).css("width",r.width+"px").css("height",r.height+"px");if(this.parameters.horizontalAlign!="center"){a(this._img).css("float",this.parameters.horizontalAlign)}}}j.prototype=new m();function i(){this.init=function(){this.me().parent().css("opacity","0")}}i.prototype=new m();function g(){var o="mjs-object_",p;this.init=function(){p=this;var r="";var t={wmode:"transparent",allowScriptAccess:"always",scale:"scale",allowFullScreen:"true",play:"true",loop:"false"};var s=o+this.id+"_wrap";var q={id:s,name:s};swfobject.embedSWF(response.content.website.settings.basePath+this.value,s,"100%","100%","9.0.23","expressInstall.swf",false,t,q)}}g.prototype=new m();function b(){}b.prototype=new m();var l=function(p){var q=null,r,o;try{switch(p.type){case"image":q=j;break;case"htmlText":q=b;break;case"shape":q=i;break;case"swf":q=g;break;case"flv":q=k;break;default:q=m;break}if(q){r=new q();o=a.extend({},r,p);return o}}catch(s){throw new Error(s.message,s.lineNumber)}return null};return{create:l,ObjectClass:m}})()})(jQuery);(function(a){MotoJS.preloaderFactory=(function(){var c="#mjs-preloader",g="#mjs-site-preloader";function b(i){this.label=i}b.prototype.start=function(){a(this.label).show()};b.prototype.stop=function(){a(this.label).hide()};function e(i){this.label=i}e.prototype=new b();function d(i){this.label=i}d.prototype=new b();d.prototype.stop=function(){a(this.label).hide()};return{getPagePreloader:function(){return new e(c)},getSitePreloader:function(){return new d(g)}}})()})(jQuery);(function(e){MotoJS.tools={};MotoJS.tools.adjustImage=function(l,k,j){var i,g={width:k.w,height:k.h,top:"",right:"",bottom:"",left:""};j=e.extend({w:0,h:0,valign:"left",halign:"top"},j);switch(l){case"fill":case"fit":i=scaleSize(k.w,k.h,j.w,j.h,"fill"==l,k.respectMaxSize);g.width=i[0];g.height=i[1];break;default:break}switch(j.valign){case"bottom":g.bottom=0;break;case"middle":g.top=(j.h-g.height)/2;break;default:g.top=0}switch(j.halign){case"right":g.right=0;break;case"center":g.left=(j.w-g.width)/2;break;default:g.left=0}return g};MotoJS.tools.applyAdjustments=function(g,i){if(!g instanceof jQuery){g=e(g)}if(!g[0]){return false}i=e.extend({width:"",height:"",top:"",right:"",bottom:"",left:""},i);g.width(i.width).height(i.height).css({top:i.top,left:i.left,right:i.right,bottom:i.bottom});return true};MotoJS.tools.ImageProvider=function(q){var g={},m,j={};q=q||{};q=e.extend({onFirstProviderAdd:null,onLastProviderRemove:null,onProviderActivate:null},q);var n=function(t,r,s){s=s||false;if(typeof r!=="function"||g.hasOwnProperty(t)){return false}m=t;if(Object.size(g)==0&&typeof q.onFirstProviderAdd==="function"){q.onFirstProviderAdd(s)}g[t]=r;j[t]=s;return true};var k=function(r){if(g.hasOwnProperty(r)){delete g[r];delete j[r];m=null;for(m in j){break}for(m in g){break}}if(Object.size(g)==0&&typeof q.onLastProviderRemove==="function"){m=null;q.onLastProviderRemove()}};var o=function(r){r=parseInt(r,10);if(!isNaN(r)){m=r}if(typeof q.onProviderActivate==="function"){q.onProviderActivate(l())}};var i=function(){return m};var p=function(){if(typeof g[m]=="function"){return g[m]}return false};var l=function(r){r=!!r||m;if(j.hasOwnProperty(r)){return j[r]}return true};return{add:n,remove:k,setId:o,getId:i,get:p,isSingleImage:l,getList:function(){return{providers:g,single:j}}}};MotoJS.tools.isApple=function(){return navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)};MotoJS.tools.isIE=function(){return e.browser.msie?e.browser.version:undefined};var d=" -webkit- -moz- -o- -ms- ".split(" "),c="modernizr";var b=function(o,q,j,p){var i,n,l,g=document.createElement("div"),m=document.body,k=m?m:document.createElement("body");if(parseInt(j,10)){while(j--){l=document.createElement("div");l.id=p?p[j]:c+(j+1);g.appendChild(l)}}i=["&#173;",'<style id="s',c,'">',o,"</style>"].join("");g.id=c;(m?g:k).innerHTML+=i;k.appendChild(g);if(!m){k.style.background="";document.documentElement.appendChild(k)}n=q(g,o);!m?k.parentNode.removeChild(k):g.parentNode.removeChild(g);return !!n};MotoJS.tools.isTouchDevice=function(){var g;if(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch){g=true}else{b(["@media (",d.join("touch-enabled),("),c,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(i){g=i.offsetTop===9})}return g};var a=[];MotoJS.tools.loadImages=function(g,p){var o,n,m=0,k=[];if(typeof g=="string"){g=[g]}if(g.constructor!=Array){return false}n=g.length;m=0;var j=function(){m++;if(m==n){if(e.isFunction(p)){p(k)}}};for(var l=0;l<n;l++){o=e("<img />");o.on("load",function(){a.push(this);k.push(this);j()}).error(j);o.attr("src",g[l])}};e.fn.mjsLoadImg=function(l){var g=this.filter("img"),k=g.length,i=0;var j=function(){i++;if(i==k){l(i)}};return(typeof l=="function")?g.each(function(){if(e(this).is("img")){if(this.complete){j()}else{e(this).load(j).error(j);this.src=this.src}}}):this};MotoJS.tools.strToInt=function(g){return parseInt(g,10)|0};MotoJS.tools.stripTags=function(g,j){j=(((j||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,k=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return g.replace(k,"").replace(i,function(m,l){return j.indexOf("<"+l.toLowerCase()+">")>-1?m:""})}}(jQuery));(function(a){MotoJS.widgets=(function(){var c={},e="#mjs-widget_",j=".mjs-widget-content",d=".mjs-widget";function l(q,p){if(!q||typeof p!="function"){return null}this.className=q;this.construct=p;this.parent=this.construct.prototype;this.callParentFunc=function(r,s,t){var t=t||[];if(this.parent[s]){this.parent[s].apply(r,t)}}}function k(){var p=this.id="";this.properties={};this.parentClass=k;this.hideAnimationComplete;this.showAnimationComplete;this.me=function(q){var r=e+this.id+" > "+j;return q?a(r).find(q):a(r)};this.applyOpacity=function(){var q=this.hasOwnProperty("alpha")?this.alpha:1;this.getDomObj().css("opacity",parseFloat(q))};this.hide=function(r){var q={},r=r||{},s;s=MotoJS.animation.hide(e+this.id,r);a.isFunction(this.hideAnimationComplete)&&a.when(s).then(this.hideAnimationComplete);return s};this.show=function(s){var r={},s=s||{},t,q=this;r.opacity=this.alpha||"0";if(s.animationShow){r.animationShow=s.animationShow}if(s.duration){r.duration=s.duration}t=MotoJS.animation.show(e+this.id,r);a.isFunction(this.showAnimationComplete)&&a.when(t).then(this.showAnimationComplete);return t};this.getDomObj=function(){return a(e+this.id)};this.getProperty=function(q){return this.properties[q]};this.getPropertyValue=function(s){var r=this.getProperty(s),q;if(a.isPlainObject(r)){q=r.value}return q};this.applyDefaults=function(q){if(a.isPlainObject(q)){this.properties=a.extend(true,q,this.properties)}};this._exec=function(){};this._destruct=function(){}}var m=function(q,r,p){a.extend(r.prototype,new k());c[q]=r;p&&i(q,p)};var n=function(p){return c[p]||null};var g=function(r){var q,s,p,t;q=n(r);if(q){s=new q(new l(r,q));if(q.ext){for(t in q.ext){s[t]=q.ext[t]}}return s}else{return new k()}};var i=function(p,t){if(p==t){return}var s=n(p);var r=n(t);if(s&&r&&s.superclass!=r.prototype){var q=s.prototype;s.prototype=g(t);a.extend(s.prototype,q);s.superclass=r.prototype}};var b=function(q,p){var r=n(q);r.ext=r.ext||{};a.extend(r.ext,p)};var o=function(q){var p=MotoJS.page.getHolderItemById(q);if(!p){p=MotoJS.website.getHolderItemById(q)}if(!p){p=MotoJS.layout.getHolderItemById(q)}if(!p){p=MotoJS.popup.getHolderItemById(q)}return(p&&p.widgetType=="module")?p:null};return{reg:m,extend:i,refact:b,create:g,getWidgetById:o,callWidgetMethod:function(p,s,r){var q;if(p&&(q=o(p))){var s=q[s]||null;if(typeof s=="function"){return s.apply(q,r)}}return false},WidgetClass:k}})();MotoJS.widgets.reg("AbstractModule",function(){this.init=function(){var b=this}})})(jQuery);(function(a){MotoJS.animation=(function(){var g={},c={duration:500,opacity:1,animationShow:"fade",animationHide:"fade"},e={general:{}},i;var d=function(n){var m;return isNaN(m=parseInt(n))?c.duration:m};var j={fade:function(o){var m=this,o=o||{},p=parseInt(o.duration)||c.duration,n=parseFloat(o.opacity)||c.opacity,q={};isNaN(p)&&(p=c.duration);if(n==1){q.opacity=""}if(MotoJS.tools.isIE()<9){p=0}return this.animate({opacity:n},p,function(){m.css(q)}).promise()},flyLeft:function(s){var u=this,q=u.position(),s=s||{},o=parseInt(s.duration)||c.duration,r=parseFloat(s.opacity)||c.opacity,t=a(u).width(),p=u.offset(),m=a(window).width(),n={left:u.css("left")};if(u.hasClass("mjs-auto-right-window")&&!u.hasClass("mjs-auto-left-window")){n.left=""}if(r==1){r=""}u.css({opacity:r,left:-(m-p.left)});return u.animate({left:q.left},o,i,function(){u.css(n)}).promise()},flyRight:function(q){var n=this,m=n.position(),q=q||{},r=parseInt(q.duration)||c.duration,o=parseFloat(q.opacity)||c.opacity,p=a(window).width(),t=n.offset(),s={left:n.css("left")};if(o==1){o=""}this.css({opacity:o,left:(p-t.left+2*m.left)});return this.animate({left:(m.left)},r,i,function(){n.css(s)}).promise()},resize:function(r){var o=this,q=this.width(),n=this.height(),m=this.position(),r=r||{},s=parseInt(r.duration)||c.duration,p=parseFloat(r.opacity)||c.opacity,t={left:o.css("left"),top:o.css("top")};if(p==1){p=""}this.css({width:0,height:0,opacity:p,left:m.left+q/2,top:m.top+n/2});return this.animate({width:q,height:n,left:m.left,top:m.top},s,i,function(){o.css(t)}).promise()},scrollUp:function(q){var o=this,n=this.height(),m=this.position(),q=q||{},r=parseInt(q.duration)||c.duration,p=parseFloat(q.opacity)||c.opacity,s={top:o.css("top")};if(p==1){p=""}this.css({height:0,opacity:p,top:m.top+n});return this.animate({height:n,top:m.top},r,i,function(){o.css(s)}).promise()},scrollDown:function(p){var n=this,m=this.height(),p=p||{},q=parseInt(p.duration)||c.duration,o=parseFloat(p.opacity)||c.opacity,r={};if(o==1){o=""}this.css({height:0,opacity:o});return this.animate({height:m},q,i,function(){n.css(r)}).promise()}};e.show=j;var l={fade:function(m){var m=m||{},n=parseInt(m.duration)||c.duration;return this.animate({opacity:0},n).promise()},resize:function(q){var p=this.width(),n=this.height(),m=this.position(),q=q||{},r=parseInt(q.duration)||c.duration,o=this;return this.animate({width:0,height:0,left:m.left+p/2,top:m.top+n/2},{duration:r,easing:i,complete:function(){o.css("overflow","hidden")}}).promise()},flyLeft:function(p){var p=p||{},r=parseInt(p.duration)||c.duration,m=this.position(),q=this.width(),s=this.offset(),n=this,o=a(window).width();return this.animate({left:-(o-s.left)},{duration:r,easing:i,complete:function(){n.css("overflow","hidden")}}).promise()},flyRight:function(p){var p=p||{},q=parseInt(p.duration)||c.duration,o=a(window).width(),m=this.position(),r=this.offset(),n=this;return this.animate({left:(o-r.left+2*m.left)},{duration:q,easing:i,complete:function(){n.css("overflow","hidden")}}).promise()},scrollUp:function(p){var n=this.height(),m=this.position(),p=p||{},q=parseInt(p.duration)||c.duration,o=this;return this.animate({height:0},{duration:q,easing:i,complete:function(){o.css("overflow","hidden")}}).promise()},scrollDown:function(p){var n=this.height(),m=this.position(),p=p||{},q=parseInt(p.duration)||c.duration,o=this;return this.animate({height:0,top:m.top+n},{duration:q,easing:i,complete:function(){o.css("overflow","hidden")}}).promise()}};e.hide=l;function b(m){this.selector=m;this._in=e.show[c.animationShow];this._out=e.hide[c.animationHide];this.show=function(n){var o=this._in.call(a(this.selector),n);if(!o||typeof o.done!="function"){a(this.selector).css({opacity:1});return true}return o};this.hide=function(n){var o=this._out.call(a(this.selector),n);if(!o||typeof o.done!="function"){a(this.selector).css({opacity:0});return true}return o};this.setShowHandler=function(n){(typeof n=="function")&&(this._in=n)};this.setHideHandler=function(n){(typeof n=="function")&&(this._out=n)}}var k=function(n,o){var m;if(n&&g[n]){m=g[n];m.constructor==Array&&m.push(o)}};return{hide:function(n,p){var r,m;try{r=new b(n);if(p&&p.animationHide){r.setHideHandler(l[p.animationHide])}m=r.hide(p);p.queueName&&k(p.queueName,m);return m}catch(q){throw new Error("Hide animation error.")}},show:function(n,p){var r,m;try{r=new b(n);if(p&&p.animationShow){r.setShowHandler(j[p.animationShow])}m=r.show(p);p.queueName&&k(p.queueName,m);return m}catch(q){throw new Error("Show animation error.")}},waitForAnimationComplete:function(q){var o=a.Deferred(),p=0,r,n,m;if(g.hasOwnProperty(q)&&g[q].constructor==Array&&g[q].length>0){m=g[q];r=m.length;a.each(m,function(s,t){t.done(function(){p++;if(r==p){o.resolve()}})});n=o.promise()}else{n=o.resolve()}return n},openQueue:function(m){if(!g.hasOwnProperty(m)){g[m]=[];return true}return false},closeQueue:function(m){if(g.hasOwnProperty(m)){delete g[m]}},addToLibrary:function(m,p,o){var m=m||null,p=p||"general",o=(typeof o=="function")?o:null,n;if(!(m&&o)){return false}switch(p){case"show":e.show[m]=o;break;case"hide":e.hide[m]=o;break;default:if(p=="general"){e.general[m]=o}else{n={};n[m]=o;e[p]=n}break}return true},getEffectHandler:function(m,o){var m=m||null,o=o||"general",n;if(in_array(o,["show","hide","general"])){n=e[o][m]||null}else{n=e[o]?e[o][m]:null}return n},setDefaultAnimationParams:function(m){var m=m||{};if(m.duration){m.duration=parseInt(m.duration,10);if(isNaN(m.duration)){m.duration=0}c.duration=m.duration}if(m.animationHide){c.animationHide=m.animationHide}if(m.animationShow){c.animationShow=m.animationShow}}}})()})(jQuery);(function(a){MotoJS.widgets.reg("ContactFormModule",function(){var e="id";var m;var i;var g;var s;var v=(document.createElement&&document.getElementsByTagName);var n=function(z,A){if(!A){A=""}return(m.data&&m.data.configuration&&m.data.configuration[z]?m.data.configuration[z]:A)};var o=function(C){l(n("formProcessingText"));var D=n("emailFromSource");var z=new RegExp("^[0-9]+$");if(z.test(D)){if(e=="id"){D=t("input_"+D).val()}else{var B;for(var A in m.data.items.formItems){B=m.data.items.formItems[A];if(parseInt(B.id)==parseInt(D)){D=a('input[name="data['+B.mailOrder+":"+B.label+']"]',C).val();break}}}}a('input[name="mail_from"]',C).val(D);a(C).ajaxSubmit({success:j,error:r,dataType:"json"});return false};var j=function(A,C,D,z){try{if(A.status){l(n("messageSentText"));z.trigger("reset")}else{l(n("messageSentFailedText"))}}catch(B){}};var r=function(A,C,D,z){try{log("Cannot parse response: "+A);l(n("messageSentFailedText"))}catch(B){}};var t=function(z,A){if(A){return"#mjs-widget_"+m.id+"_"+z}return a("#mjs-widget_"+m.id+"_"+z)};var b=function(B,z,D){var A=a(z).data("formItem")||{};if(A.hasOwnProperty("required")&&!A.required){return true}if(!this.depend(D,z)){return"dependency-mismatch"}if(B==a(z).attr("placeholder")){B=""}switch(z.nodeName.toLowerCase()){case"select":var C=a(z).val();return C&&C.length>0;case"input":if(this.checkable(z)){return this.getLength(B,z)>0}default:return a.trim(B).length>0}};var c=function(A,z,B){if(a(z).data("formItem").required||A.length){if(typeof B!=="RegExp"){B=new RegExp(B)}return B.test(A)}return true};var w=function(G,D,F){if(G==a(D).attr("placeholder")){G=""}if(F.required||G.length){var z="[^\\s]";var C=function(I,H){return z+"{"+(I-1)+","+(H-1)+"}"};var A="[^.\\s]";var B="^"+A+C(+F.minLettersBeforeAt,+F.maxLettersBeforeAt)+"@"+A+z+"*\\."+A+C(+F.minLettersAfterLastPoint,+F.maxLettersAfterLastPoint)+"$";var E=new RegExp(B);return E.test(G)}return true};var q=function(A,z){return s[A].replace("{LABEL}",z)};var k=function(A,z){switch(A.validator){case"EmailValidator":z.rules("add",{emailEx:A,messages:{emailEx:q("emailNotValid",A.label)}});break;case"StringValidator":if(A.minChars>0){z.rules("add",{minlength:A.minChars,messages:{minlength:q("minCharsLimitError",A.label)}})}if(A.regExp){z.rules("add",{regEx:new RegExp(A.regExp,A.regExpFlags),messages:{regEx:q("reqExpError",A.label)}})}break;case"NumberValidator":z.rules("add",{number:true,messages:{number:q("notANumberError",A.label)}});if(!A.allowNegative&&A.minValue<0){A.minValue=0}if(A.minValue){z.rules("add",{min:A.minValue,messages:{min:q("lowerThanMinError",A.label)}})}if(A.maxValue){z.rules("add",{max:A.maxValue,messages:{max:q("biggerThanMaxError",A.label)}})}break;case"DateValidator":z.rules("add",{date:true,messages:{date:q("dateIsNotValidError",A.label)}});break;default:break}};var u=function(){s=n("validationErrorMessages");a.validator.addMethod("regEx",c);a.validator.addMethod("emailEx",w);a.validator.addMethod("required",b);var A=i.validate({showErrors:function(E,F){log(F);if(F&&F instanceof Array&&F[0]){l(F[0].message)}else{l()}},submitHandler:o,ignore:false,onfocusout:function(E,F){},onkeyup:function(E,F){},onclick:function(E,F){}});for(var B in m.data.items.formItems){if(m.data.items.formItems.hasOwnProperty(B)){var D=m.data.items.formItems[B];var z=a(t("input_"+D.id));z.data("formItem",D);if(D.required){var C=z.rules("add",{required:true,messages:{required:q("fieldIsRequired",D.label)}})}if(D.validator){k(D,z)}}}};var d=function(){if(!v){return}if(a(".fakeFileUpload",i)[0]){return}var B=document.createElement("div");B.className="mjs-fakefile";var A=document.createElement("input");A.type="text";B.appendChild(A);var z=document.createElement("div");z.innerHTML="...";B.appendChild(z);a(".mjs-input.mjs-input-file",i).each(function(C){var D=B.cloneNode(true);this.parentNode.appendChild(D);this.relatedElement=D.getElementsByTagName("input")[0];this.relatedElement.style.cssText=this.style.cssText;this.relatedElement.className="mjs-input fakeFileUpload";a(D).css("line-height",a(this).height()+"px");a(this.relatedElement).attr("placeholder",a(this).data("placeholder"));this.onchange=function(){this.relatedElement.value=this.value};a(this).addClass("mjs-hidden")})};var l=function(z){if(!g){g=a("#mjs-widget_"+m.id+"_statusMessage")}if(!z){z=""}g.text(z)};var p=function(){var A="",z;a("input.mjs-input-text",i).each(function(){a(this).css("width",(parseInt(a(this).parent().width())-parseInt(a(this).css("padding-left"))-parseInt(a(this).css("padding-right")))+"px");var B=Math.round(parseInt(a(this).css("font-size"))*1.2);if(a(this).parent().height()>B){z=((a(this).parent().height()-B)/2)+"px";a(this).css({"padding-top":z,"padding-bottom":z})}});a("textarea",i).each(function(){a(this).css({width:(parseInt(a(this).parent().width())-8)+"px",height:(parseInt(a(this).parent().height())-8)+"px"});a(this).parent().css({width:"auto",height:"auto"})});a(".mjs-item",i).bind("click",function(){a("input",this).focus()});return};this.init=function(){m=this;try{i=this.me().find("form");p();d();u();a("#mjs-widget_"+m.id+"_resetButton").click(function(A){A.preventDefault();l();i.trigger("reset")});i.find("input[type=checkbox], input[type=radio]").motoInput();i.find("input, textarea").placeholder()}catch(z){log("oops in contact form");log(z)}}})})(jQuery);(function(a){MotoJS.widgets.reg("GalleryModule",function(){var r,o,p,g="GalleryModule",l=3,c=3,n=false,b=false,w={transition:"elastic",width:"100%",height:"100%",current:false,open:false,slideshow:true,slideshowAuto:false,slideshowSpeed:2000,returnFocus:false,preloading:false,previous:"",next:"",close:"",slideshowStart:"",slideshowStop:""},s={w:null,h:null,mTop:null},D={},q=false,j,v;var C=function(J,F,G,I){var E=I/G,H=F/J;if(E>=H&&I>F){I=F;G=I/E}else{if(E<H&&G>J){G=J;I=G*E}}return[G,I]};var u=function(E){if(!n){n=true;r.me("ul").animate({left:E},100,function(){n=false})}};var A=function(){var H=r.me("ul").parent().width();var G=r.me("ul").parent().height();r.me("ul").width(H+parseInt(H/c*p));r.me("ul li").width(r.me("ul").width()/(p+c));r.me("ul li").height((r.me("ul").height()-15)/l);var E=r.me("ul li").width();var F=r.me("ul li").height();a(".mjs-prev, .mjs-next",r.me()).off();a(".mjs-prev, .mjs-next",r.me()).on("click",function(J){J.preventDefault();var I=parseInt(r.me("ul").css("left"))||0;if(a(this).hasClass("mjs-prev")){I<0&&u(I+E)}else{if(a(this).hasClass("mjs-next")){(I+r.me("ul").width()>H)&&u(I-E)}}})};var B=function(){var E=r.me("ul li").width();var F=r.me("ul li").height();r.me("ul li img").each(function(){var G=C(E-parseInt(a(this).parent("a").css("marginLeft"))*2,F-parseInt(a(this).parent("a").css("marginTop"))*2,a(this).width(),a(this).height());a(this).width(G[0]);a(this).height(G[1]);a(this).css("margin-top",parseInt((a(this).parent().height()-a(this).height())/2)+"px")})};var k=function(){var E=MotoJS.popup.getOpenedPopupUrl()||MotoJS.page.getUrl();MotoJS.router.pushState(E+"/"+r.id+"/"+a.colorbox.element().data("item"))};var t=function(){var G=r.properties,H,E,F;G.thumbnailsBgColor.value&&a("#cboxContent").css("background-color","#"+G.thumbnailsBgColor.value);G.controlPanelColor.value&&a("#cboxBottomCenter").css("background-color","#"+G.controlPanelColor.value);G.overlayColor.value&&a("#cboxOverlay").css("background-color","#"+G.overlayColor.value);G.descriptionBgColor.value&&a("#cboxTitle").css("background-color","#"+G.descriptionBgColor.value);G.descriptionBgAlpha.value&&a("#cboxTitle").css("opacity",G.descriptionBgAlpha.value/100);a("#cboxTitle").css("visibility","hidden")};var e=function(){var H=r.properties,G=["#cboxNext","#cboxPrevious","#cboxSlideshow","#cboxClose","#cboxInfo"],F=w.slideshowAuto,E={"#cboxPrevious":"prevIcon","#cboxNext":"nextIcon","#cboxClose":"closeIcon","#cboxSlideshow":F?"pauseSlideShowIcon":"startSlideShowIcon","#cboxInfo":"descriptionIcon"},I=a("#cboxBottomCenter").height();H.slideshowSpeed.value&&(w.slideshowSpeed=H.slideshowSpeed.value);H.autoStartSlideShow.value&&(w.slideshowAuto=H.autoStartSlideShow.value=="false"?false:true);H.prevIcon.value?r.me(".mjs-prev img").attr("src",MotoJS.content.getFullUrl(H.prevIcon.value)):r.me(".mjs-prev img").attr("src","");H.nextIcon.value?r.me(".mjs-next img").attr("src",MotoJS.content.getFullUrl(H.nextIcon.value)):r.me(".mjs-next img").attr("src","");a.each(G,function(K,J){if(J=="#cboxInfo"){return}a(J).css("background-image","none")});r.me("ul li a").attr("rel","g"+r.id);H.prevIcon.image&&(w.previous='<img src="'+MotoJS.content.getFullUrl(H.prevIcon.value)+'" width="'+H.prevIcon.image.parameters.width+'" height="'+H.prevIcon.image.parameters.height+'" />');H.nextIcon.image&&(w.next='<img src="'+MotoJS.content.getFullUrl(H.nextIcon.value)+'" width="'+H.nextIcon.image.parameters.width+'" height="'+H.nextIcon.image.parameters.height+'" />');H.closeIcon.image&&(w.close='<img src="'+MotoJS.content.getFullUrl(H.closeIcon.value)+'" width="'+H.closeIcon.image.parameters.width+'" height="'+H.closeIcon.image.parameters.height+'" />');H.startSlideShowIcon.image&&(w.slideshowStart='<img src="'+MotoJS.content.getFullUrl(H.startSlideShowIcon.value)+'" width="'+H.startSlideShowIcon.image.parameters.width+'" height="'+H.startSlideShowIcon.image.parameters.height+'" />');H.pauseSlideShowIcon.image&&(w.slideshowStop='<img src="'+MotoJS.content.getFullUrl(H.pauseSlideShowIcon.value)+'" width="'+H.pauseSlideShowIcon.image.parameters.width+'" height="'+H.pauseSlideShowIcon.image.parameters.height+'" />');r.me("ul li a").colorbox(a.extend(w,{onOpen:function(){var J;t();if(a("#cboxInfo").length==0){if(H.descriptionIcon.value){var K=a('<div><img src="'+MotoJS.content.getFullUrl(H.descriptionIcon.value)+'" /></div>');K.attr("id","cboxInfo");K.css("visibility","hidden")}a("#cboxContent").append(K);a("#cboxInfo").click(function(){J=(a("#cboxTitle").css("visibility")=="visible")?"hidden":"visible";a("#cboxTitle").css("visibility",J)})}a("#cboxSlideshow").appendTo("#cboxContent");a.each(G,function(O,N){if(!H[E[N]].image){return}var M=H[E[N]].image.parameters.height,P=H[E[N]].image.parameters.width,Q=parseInt((I/2),10)-parseInt((M/2),10),L=-M-Q;if(N=="#cboxSlideshow"){a(N).css("margin-top",Q+"px");a(N).css("margin-left",-parseInt((P/2),10)+"px")}else{a(N).css("bottom",L+"px")}});if(!navigator.userAgent.match(/iPhone/i)){a("body, html").css({overflow:"hidden"})}},onLoad:function(){k()},onComplete:function(){var K=r.data,J=D[a(this).data("item")]||null,L;s.w=a("#cboxLoadedContent > img").width();s.h=a("#cboxLoadedContent > img").height();s.mTop=a("#cboxLoadedContent > img").css("margin-top");a("#cboxTitle").css("visibility","hidden");if(typeof J!="object"){log("ColorBox loading image error. Cannot extract description of the image.")}else{if(J.properties&&J.properties.description){L=a.trim(a("<div>"+J.properties.description.value+"</div>").text());if(L.length>0){a("#cboxInfo").css("visibility","visible");a("#cboxTitle").append('<div class="cboxTitlePadding" />');a("#cboxTitle .cboxTitlePadding").html(J.properties.description.value)}else{a("#cboxInfo").css("visibility","hidden")}}}q=true},onClosed:function(){MotoJS.router.pushState(MotoJS.router.parseUrl().page);q=false;if(!navigator.userAgent.match(/iPhone/i)){a("body, html").css({overflow:"auto"})}}}))};var i=function(){a.colorbox.resize(w);a("#cboxOverlay").css("height",a("body").css("min-height"));var F=a("#cboxLoadedContent > img"),E=F.height(),H=F.width(),J=a("#cboxLoadedContent").width(),I=a("#cboxLoadedContent").height(),G;if(E>I||H>J){G=C(J,I,H,E);F.width(G[0]);F.height(G[1])}else{if(E<s.h||H<s.w){G=C(J,I,s.w,s.h);F.width(G[0]);F.height(G[1])}}F.css("margin-top",((I-E)/2)+"px")};var m=function(E){if(E.widget==r.id){if(b){b=false;return}if(q){E.data[0]&&a.colorbox.item(E.data[0])}else{E.data[0]&&r.me('ul li a[data-item="'+parseInt(E.data[0])+'"]').trigger("click")}}else{q&&a.colorbox.close()}};this._exec=function(E){E&&r.me('ul li a[data-item="'+E+'"]').trigger("click")};var d=function(){var G=r.properties,I=true,H=["rowsNum","columnsNum","autoStartSlideShow","thumbnailsBgColor","controlPanelColor","overlayColor","descriptionIcon","descriptionBgColor","descriptionBgAlpha","prevIcon","nextIcon","closeIcon","slideshowSpeed","startSlideShowIcon","pauseSlideShowIcon"],F,E;try{if(!(G||(typeof G.data.items=="object"))){return false}for(F=0;F<H.length;F++){E=H[F];if(I=G.hasOwnProperty(E)){I=G[E].hasOwnProperty("value")}if(!I){break}}}catch(J){return false}return I};var z=function(F){var E={};for(var G in F){F[G].id&&(E[F[G].id]=F[G])}return E};this.init=function(){r=this;if(!d()){throw new Error("ColorBox initialization error. Response object is broken.")}var E=r.properties;l=parseInt(r.properties.rowsNum.value)||3;c=parseInt(r.properties.columnsNum.value)||3;o=r.me("ul li").length;p=parseInt(o/l)-c;o%l!=0&&p++;D=z(r.data.items);e();if(r.id){MotoJS.events.subscribe("onResize",r.id,A);MotoJS.events.subscribe("onResize",r.id,B);MotoJS.events.subscribe("onResize",r.id,i);MotoJS.events.subscribe("onOrientationChange",r.id,A);MotoJS.events.subscribe("onOrientationChange",r.id,B);MotoJS.events.subscribe("onOrientationChange",r.id,i);MotoJS.events.subscribe("onStateChange",r.id,m)}}})})(jQuery);(function(a){MotoJS.widgets.reg("GoogleMapModule",function(){this.init=function(){var j=this;if(!j.data.items.length){return}var k=j.getCords(j.properties.positionMapFocus.value,j.data.items);var g={normal:google.maps.MapTypeId.ROADMAP,satellite:google.maps.MapTypeId.SATELLITE,hybrid:google.maps.MapTypeId.HYBRID,physical:google.maps.MapTypeId.TERRAIN};var c={anchor_bottom_left:google.maps.ControlPosition.BOTTOM_LEFT,anchor_bottom_center:google.maps.ControlPosition.BOTTOM_CENTER,anchor_bottom_right:google.maps.ControlPosition.BOTTOM_RIGHT,anchor_left_bottom:google.maps.ControlPosition.LEFT_BOTTOM,anchor_right_bottom:google.maps.ControlPosition.RIGHT_BOTTOM,anchor_left_center:google.maps.ControlPosition.LEFT_CENTER,anchor_right_center:google.maps.ControlPosition.RIGHT_CENTER,anchor_left_top:google.maps.ControlPosition.LEFT_TOP,anchor_right_top:google.maps.ControlPosition.RIGHT_TOP,anchor_top_left:google.maps.ControlPosition.TOP_LEFT,anchor_top_center:google.maps.ControlPosition.TOP_CENTER,anchor_top_right:google.maps.ControlPosition.TOP_RIGHT};var d=j.fillMapTypes(j.properties,g);var b={zoom:j.properties.mapZoom.value-0,center:new google.maps.LatLng(k[0],k[1]),mapTypeId:g[j.properties.mapType.value.toLowerCase()],zoomControl:("invisible"!=j.properties.controllPositionZoom.value)?true:false,zoomControlOptions:{position:c[j.properties.controllPositionZoom.value]},scaleControl:("invisible"!=j.properties.controllPositionScale.value)?true:false,scaleControlOptions:{position:c[j.properties.controllPositionScale.value]},mapTypeControl:("invisible"!=j.properties.controllPositionMapType.value)?true:false,mapTypeControlOptions:{position:c[j.properties.controllPositionMapType.value],mapTypeIds:d},overviewMapControl:("invisible"!=j.properties.controllPositionOverview.value)?true:false,overviewMapControlOptions:{opened:false},panControl:("invisible"!=j.properties.controllPositionLocation.value)?true:false,panControlOptions:{position:c[j.properties.controllPositionLocation.value]}};j.map=new google.maps.Map(document.getElementById("mjs-widget_"+j.id),b);var i={};for(key in j.data.items){prop=j.data.items[key].properties;var e={position:new google.maps.LatLng(prop.latitude.value-0,prop.longitude.value-0),map:j.map,title:j.stripTags(prop.title.value)};if(prop.icon.value!=""){e.icon=new google.maps.MarkerImage(response.content.website.settings.basePath+prop.icon.value)}i[key]=new google.maps.Marker(e);i[key].desc=prop.title.value+prop.description.value;google.maps.event.addListener(i[key],"click",function(){if(j.infowindow!=undefined){j.infowindow.close()}j.infowindow=new google.maps.InfoWindow({content:this.desc,size:new google.maps.Size(50,50)});j.infowindow.open(j.map,this)})}};this.fillMapTypes=function(d,c){var b=[];if(d.mapTypesHybrid.value=="true"){b.push(c.hybrid)}if(d.mapTypesNormal.value=="true"){b.push(c.normal)}if(d.mapTypesSatellite.value=="true"){b.push(c.satellite)}if(d.mapTypesPhysical.value=="true"){b.push(c.physical)}return b};this.getCords=function(c,d){switch(c){case"first":x=d[0].properties.latitude.value-0;y=d[0].properties.longitude.value-0;break;case"last":x=d[d.length-1].properties.latitude.value-0;y=d[d.length-1].properties.longitude.value-0;break;default:var i=d[0].properties.latitude.value-0;var b=d[0].properties.latitude.value-0;var g=d[0].properties.longitude.value-0;var j=d[0].properties.longitude.value-0;for(var e in d){i=(d[e].properties.latitude.value-0>i)?d[e].properties.latitude.value-0:i;g=(d[e].properties.longitude.value-0>g)?d[e].properties.longitude.value-0:g;b=(d[e].properties.latitude.value-0<b)?d[e].properties.latitude.value-0:b;j=(d[e].properties.longitude.value-0<j)?d[e].properties.longitude.value-0:j}x=(i+b)/2;y=(g+j)/2;break}return[x,y]};this.stripTags=function(b,d){d=(((d||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,e=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return b.replace(e,"").replace(c,function(i,g){return d.indexOf("<"+g.toLowerCase()+">")>-1?i:""})};this.InfoBox=function(c){google.maps.OverlayView.call(this);this.latlng_=c.latlng;this.map_=c.map;this.title=c.title;this.description=c.description;this.offsetVertical_=-125;this.offsetHorizontal_=0;this.height_=100;this.width_=166;var b=this;this.boundsChangedListener_=google.maps.event.addListener(this.map_,"bounds_changed",function(){return b.panMap.apply(b)});this.setMap(this.map_)};this.InfoBox.prototype=new google.maps.OverlayView();this.InfoBox.prototype.remove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null}};this.InfoBox.prototype.draw=function(){this.createElement();if(!this.div_){return}var b=this.getProjection().fromLatLngToDivPixel(this.latlng_);if(!b){return}this.div_.style.width=this.width_+"px";this.div_.style.left=(b.x+this.offsetHorizontal_)+"px";this.div_.style.height=this.height_+"px";this.div_.style.top=(b.y+this.offsetVertical_)+"px";this.div_.style.display="block"};this.InfoBox.prototype.createElement=function(){var i=this.getPanes();var k=this.div_;if(!k){k=this.div_=document.createElement("div");k.style.border="0px none";k.style.position="absolute";k.style.width=this.width_+"px";k.style.height="11px";var g=document.createElement("div");g.style.padding="3px";g.style.background="blue";g.innerHTML=this.description;var c=document.createElement("div");var j=document.createElement("div");j.style["float"]="left";j.innerHTML="<b>"+this.title+"</b>";c.appendChild(j);var e=document.createElement("img");k.style.background="white";e.style["float"]="right";e.style.width="22px";e.style.height="22px";e.style.cursor="pointer";e.src="http://gmaps-samples.googlecode.com/svn/trunk/images/closebigger.gif";var b=document.createElement("div");b.style.clear="both";function d(l){return function(){l.setMap(null)}}google.maps.event.addDomListener(e,"click",d(this));k.appendChild(c);k.appendChild(b);k.style.display="none";i.floatPane.appendChild(k);this.panMap()}else{if(k.parentNode!=i.floatPane){k.parentNode.removeChild(k);i.floatPane.appendChild(k)}else{}}};this.InfoBox.prototype.panMap=function(){var G=this.map_;var g=G.getBounds();if(!g){return}var I=this.latlng_;var z=this.width_;var B=this.height_;var i=this.offsetHorizontal_;var e=this.offsetVertical_;var r=40;var q=40;var w=G.getDiv();var C=w.offsetWidth;var v=w.offsetHeight;var H=g.toSpan();var A=H.lng();var n=H.lat();var p=A/C;var m=n/v;var l=g.getSouthWest().lng();var s=g.getNorthEast().lng();var F=g.getNorthEast().lat();var c=g.getSouthWest().lat();var b=I.lng()+(i-r)*p;var d=I.lng()+(i+z+r)*p;var u=I.lat()-(e-q)*m;var o=I.lat()-(e+B+q)*m;var t=(b<l?l-b:0)+(d>s?s-d:0);var D=(u>F?F-u:0)+(o<c?c-o:0);var E=G.getCenter();var k=E.lng()-t;var j=E.lat()-D;G.setCenter(new google.maps.LatLng(j,k));google.maps.event.removeListener(this.boundsChangedListener_);this.boundsChangedListener_=null}})})(jQuery);(function(a){MotoJS.widgets.reg("HTMLWidgetModule",function(){var b="mjs-widget_";var c;this.init=function(){c=this};this.empty=function(){try{a("#"+b+c.id+" iframe").hide()}catch(d){}}})})(jQuery);(function(a){MotoJS.widgets.reg("RichContent",function(){var b={},k=".jspVisualStyles",w=".jspInnerWrapper",q,t,c,s,v,r,j,m,u,o,n,B,p,d,C,e,l,E;var g=function(){var G=a("<div />").addClass(k.slice(1)),F=a("<div />").addClass(w.slice(1)).css("height",v+"px");q.me(".jspPane").wrap(G);q.me(".jspPane").wrap(F)};var D=function(){var I=q.properties.hasOwnProperty("scrollerShowArrows")&&q.properties.scrollerShowArrows.value==="true"?true:false,H={showArrows:I,horizontalGutter:0,verticalGutter:parseInt(t),isScrollableH:false},F=calcAbsoluteElementsHeight(q.me())+d+E+p+l,G="<style> <!--";G+=" #mjs-widget_"+q.id+" .jspVerticalBar .jspCapTop { height:"+(p+l)+"px; }\n";G+=" #mjs-widget_"+q.id+" .jspVerticalBar .jspCapBottom { height:"+(d+E)+"px; }\n";G+="--> </style>\n";q.me().append('<div style="height: '+F+'px">&nbsp;</div>'+G);q.me().jScrollPane(H);g()};var i=function(){var F={};n=parseInt(q.style.paddingLeft)||0;B=parseInt(q.style.paddingRight)||0;p=parseInt(q.style.paddingTop)||0;d=parseInt(q.style.paddingBottom)||0;l=parseInt(q.style.borderTThickness)||0;C=parseInt(q.style.borderLThickness)||0;e=parseInt(q.style.borderRThickness)||0;E=parseInt(q.style.borderBThickness)||0;t=isNaN(t=parseInt(q.properties.scrollerPadding.value))?0:t;c=isNaN(c=parseInt(q.properties.scrollerThickness.value))?0:c;s=q.me().parent().outerWidth();v=q.me().parent().outerHeight();r=n+B+C+e;j=p+d+l+E;m=s+t+c+r;u=v+j;F.width=m+"px";F.height=u+"px";q.me().parent().css(F);q.me().css(F)};this.init=function(){q=this;o=q.holder;i();D();A("slots");A("modules");z()};var A=function(I){if(!I){I="modules"}if(!q.data[I]){return false}var G=q.data[I],F=MotoJS.holders.getHolderById(o),J=F?MotoJS.holders.getHolderCollection(F.type):null,H;if(!(F&&J)){return false}a.each(G||{},function(K){try{H=a.extend({},MotoJS.widgets.create(this.type),this);if(J.addItemToHolder(o,H)){MotoJS.content.initializer.add(H);H.parentId=q.id}}catch(L){log("Rich content init error. Widget init failed. Widget id - "+this.id+". Details - "+L.message,L.lineNumber)}})};var z=function(){var G=q.data.objects,F=MotoJS.holders.getHolderById(o),I=F?MotoJS.holders.getHolderCollection(F.type):null,H;if(!(F&&I)){return false}a.each(G||{},function(J){try{H=MotoJS.objects.create(this);if(I.addItemToHolder(o,H)){MotoJS.content.initializer.add(H);H.parentId=q.id}}catch(K){log("Rich content init error. Object init failed. Widget id - "+this.id+". Details - "+K.message,K.lineNumber)}})}})})(jQuery);(function(a){MotoJS.widgets.reg("BaseMenu",function(){this.init=function(){};this.setBGImage=function(c){if(c.length==0){return}var d=arguments[1]?"url("+MotoJS.content.getFullUrl(arguments[1])+")":"none";var e=arguments[2]?arguments[2]:"no-repeat";var b=arguments[3]&&arguments[4]?arguments[3]+" "+arguments[4]:"top left";c.css({"background-image":d,"background-repeat":e,"background-position":b})};this.killBGHack=function(b){if(b.hasOwnProperty("enableMenuBG")&&b.enableMenuBG.value=="false"){this.me("> ul > li > a.mjs-menu-styles").css({"background-color":"transparent","border-width":"0px"})}if(b.hasOwnProperty("enableSubmenuBG")&&b.enableSubmenuBG.value=="false"){this.me("> ul > li > ul li > a.mjs-menu-styles").css({"background-color":"transparent","border-width":"0px"})}};this.setSubmenuBgImage=function(b){var d;try{if(b.hasSubmenuBGImage2&&b.hasSubmenuBGRepeatMode2&&b.hasSubmenuBGHorizontalAlign2&&b.hasSubmenuBGVerticalAlign2){d=[b.hasSubmenuBGImage2.value,b.hasSubmenuBGRepeatMode2.value,b.hasSubmenuBGHorizontalAlign2.value,b.hasSubmenuBGVerticalAlign2.value];this.setBGImage(this.me("> ul > li > ul li > .mjs-menu").siblings("a.mjs-menu-styles"),d[0],d[1],d[2],d[3])}if(b.hasSubmenuBGImage&&b.hasSubmenuBGRepeatMode&&b.hasSubmenuBGHorizontalAlign&&b.hasSubmenuBGVerticalAlign){d=[b.hasSubmenuBGImage.value,b.hasSubmenuBGRepeatMode.value,b.hasSubmenuBGHorizontalAlign.value,b.hasSubmenuBGVerticalAlign.value];this.setBGImage(this.me("> ul > li > .mjs-menu").siblings("a.mjs-menu-styles"),d[0],d[1],d[2],d[3])}}catch(c){throw new Error("Menu initialization error. While setting background of item which contains submenu.")}};this.setLineHeight=function(){this.me("ul li a .mjs-menu-align").css("lineHeight",function(){return(parseInt(a(this).css("fontSize"))+2)+"px"})}});MotoJS.widgets.reg("HorizontalMenuModule",function(l){var m,g,e,d,c;var i=function(o){var n=o&&o.hash?o.hash:MotoJS.page.getUrl()||MotoJS.website.startPage.url;m.killBGHack(m.properties);m.me("> ul li.mjs-active").removeClass("mjs-active");m.me("ul li > a").filter("[data-url='"+n+"']").parent().addClass("mjs-active")};var k=function(){g.hover(function(){d=a("> .mjs-menu",this);if(a(this).offset().top>d.outerHeight()){var n=a(window).height()-(a(this).offset().top+a(this).outerHeight());if(n<d.outerHeight()){d.css("bottom",a(this).outerHeight()+"px")}else{d.css("bottom","auto");d.css("top","auto")}}d.show()},function(){d.hide();d=undefined});MotoJS.content.isApple()&&g.on("mousedown",function(n){var o=a(" ul.mjs-menu-level-1",this);if(o.is(":hidden")){o.show();a(this).find("a.mjs-link-bindable").eq(0).data("disabled",true)}});e.hover(function(){c=a("> .mjs-menu",this);var n=a(window).width()-(a(this).offset().left+a(this).outerWidth());if(n>c.outerWidth()){c.css("right","auto");c.css("left",a(this).width()+"px")}else{c.css("left","auto");c.css("right",a(this).width()+"px")}c.css({top:"0px"});c.show()},function(){c.hide();c=undefined})};var b=function(){var n=m.properties;if(!n){throw new Error("Horizontal Menu initialization error. Response properties object is undefined")}m.setLineHeight();m.killBGHack(n);m.setSubmenuBgImage(n);g=m.me("> ul.mjs-menu-level-0 > li.mjs-sub:has(ul.mjs-menu)");e=m.me("> ul .mjs-menu-level-1 > li.mjs-sub:has(ul.mjs-menu)");k();if(n.hasOwnProperty("fitText")&&n.fitText.value==="true"){m.me(".mjs-menu-level-0 > li").css("width",(100/m.me(".mjs-menu-level-0 > li").length)+"%")}else{m.me(".mjs-menu-level-0 li ul.mjs-menu").addClass("mjs-menu-minWidth")}i()};var j=function(){a(d).hide();a(c).hide()};this.init=function(){m=this;b();this.id&&MotoJS.events.subscribe("onSwitchFinish",this.id,i);MotoJS.content.isApple()&&this.id&&MotoJS.events.subscribe("onSwitchFinish",this.id,j);this.id&&MotoJS.events.subscribe("onClosePopup",this.id,i);this.id&&MotoJS.events.subscribe("onLoginBoxHide",this.id,i)}},"BaseMenu");MotoJS.widgets.reg("VerticalMenuModule",function(b){var d,i,c;var k=function(m){var l=m&&m.hash?m.hash:MotoJS.page.getUrl()||MotoJS.website.startPage.url;d.killBGHack(d.properties);d.me("> ul li.mjs-active").removeClass("mjs-active");d.me("ul li > a").filter("[data-url='"+l+"']").parent().addClass("mjs-active")};var e=function(){i.hover(function(){c=a("> .mjs-menu",this);var l=a(window).width()-(a(this).offset().left+a(this).outerWidth());if(l>c.outerWidth()){c.css("right","auto");c.css("left",a(this).width()+"px")}else{c.css("left","auto");c.css("right",a(this).width()+"px")}c.css({top:"0px"});c.show()},function(){c.hide();c=undefined});MotoJS.content.isApple()&&i.on("mousedown",function(l){var m=a(" ul.mjs-menu-level-1",this);if(m.is(":hidden")){m.show();a(this).find("a.mjs-link-bindable").eq(0).data("disabled",true)}})};var g=function(){var l=d.properties;if(!l){throw new Error("Vertical Menu initialization error. Response properties object is undefined")}d.setLineHeight();d.killBGHack(l);d.setSubmenuBgImage(l);i=d.me("> ul.mjs-menu-level-0 li.mjs-sub:has(ul.mjs-menu)");e();d.me(".mjs-menu-level-0 > li").css("height",(100/d.me(".mjs-menu-level-0 > li").length)+"%");k()};var j=function(){a(c).hide();a(c).hide()};this.init=function(){d=this;g();MotoJS.content.isApple()&&this.id&&MotoJS.events.subscribe("onSwitchFinish",this.id,j);this.id&&MotoJS.events.subscribe("onSwitchFinish",this.id,k);this.id&&MotoJS.events.subscribe("onClosePopup",this.id,k);this.id&&MotoJS.events.subscribe("onLoginBoxHide",this.id,k)}},"BaseMenu")})(jQuery);